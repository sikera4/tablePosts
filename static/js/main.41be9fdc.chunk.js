(this["webpackJsonptable-test"]=this["webpackJsonptable-test"]||[]).push([[0],{51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(7),s=n(18),o=n.n(s),i=n(8),u=n.n(i),l=(n(51),n(5)),d=n.n(l),h=n(10),j=n(3),b=(n(53),n(54),n(21)),f=n.n(b),p=n(19),O=n.n(p),x=n(1),m=function(e){var t=e.headersInfo,n=Object(c.useState)(""),r=Object(j.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)("asc"),i=Object(j.a)(o,2),u=i[0],l=i[1];return Object(x.jsxs)("tr",{children:[t.headers?t.headers.map((function(e){return Object(x.jsxs)("th",{scope:"col",title:e,className:"table__header-".concat(e),onClick:function(){!function(e){var n="asc"===u?"desc":"asc";s(e),l(n),t.onSort(e,n)}(e)},children:[e.toUpperCase(),a&&a===e&&(e===a&&"asc"===u?Object(x.jsx)(O.a,{}):Object(x.jsx)(f.a,{}))]},e)})):"",Object(x.jsx)("th",{scope:"col",className:"table__header-delete",children:"DELETE"})]})},v=n(22),g=n.n(v),S=function(e){var t=e.post,n=e.onDelete;return Object(x.jsxs)("tr",{children:[Object.keys(t).map((function(e,n){return Object(x.jsx)("td",{children:t[e]},t[e].toString()+n.toString())})),Object(x.jsx)("td",{className:"table__delete-icon",onClick:function(){n(t.id.toString())},children:Object(x.jsx)(g.a,{})})]},t.id)},y=function(e){return Object(x.jsx)("div",{className:"table-container",children:Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{className:"table__head",children:e.tableHeadData&&Object(x.jsx)(m,{headersInfo:e.tableHeadData})}),Object(x.jsx)("tbody",{children:e.tableBodyData.posts.map((function(t){return Object(x.jsx)(S,{post:t,onDelete:e.tableBodyData.onDelete},t.id)}))})]})})},C=(n(59),function(e){return Object(x.jsxs)("div",{className:"user-filter",children:[Object(x.jsx)("span",{className:"user-filter__filter-caption",children:"Filter posts by user: "}),Object(x.jsxs)("select",{className:"user-filter__filter",defaultValue:"0",onChange:e.onUserFilterChange,children:[Object(x.jsx)("option",{value:"0",children:"Choose a user..."}),e.usersData.map((function(e){return Object(x.jsx)("option",{value:e.id,children:"Username: ".concat(e.username,", ID: ").concat(e.id)},e.id)}))]})]})}),w=(n(60),function(e){return Object(x.jsxs)("div",{className:"search-input",children:[Object(x.jsxs)("span",{children:["Search through posts'",Object(x.jsxs)("select",{defaultValue:"none",className:"search-input__search-field-select",onChange:e.onSelectedSearchFieldChange,children:[Object(x.jsx)("option",{value:"none",children:"Choose a field..."}),e.headers.map((function(e){return Object(x.jsx)("option",{value:e,children:e.toUpperCase()},e)}))]}),":"]}),Object(x.jsx)("input",{type:"text",placeholder:"Search...",className:"search-input__input",onChange:e.onSearchStringChange})]})});var k=function(){var e=Object(c.useState)(),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),o=Object(j.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),f=b[0],p=b[1],O=Object(c.useState)({column:"",order:""}),m=Object(j.a)(O,2),v=m[0],g=m[1],S=Object(c.useState)(""),k=Object(j.a)(S,2),_=k[0],N=k[1],D=Object(c.useState)(),E=Object(j.a)(D,2),F=E[0],I=E[1],P=Object(c.useState)(0),T=Object(j.a)(P,2),B=T[0],U=T[1],H=Object(c.useState)(""),L=Object(j.a)(H,2),J=L[0],M=L[1],V=function(e,t){g({column:e,order:t})},A=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/users");case 2:if(200===(t=e.sent).status){e.next=5;break}throw new Error("Could not fetch users data");case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/posts");case 2:if(200===(t=e.sent).status){e.next=5;break}throw new Error("Could not fetch the posts");case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=9;break}return e.next=3,fetch("https://jsonplaceholder.typicode.com/posts/".concat(t),{method:"DELETE"});case 3:if(200===(n=e.sent).status){e.next=6;break}throw new Error("Could not delete the post!");case 6:return alert("Successfully deleted the post with id ".concat(t," (or would've if it did actually work)")),N(""),e.abrupt("return",n.status);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){document.title="Table with posts!",Object(a.trackPromise)(q().then((function(e){r(e);for(var t=[],n=0,c=Object.keys(e[0]);n<c.length;n++){var a=c[n];t.push(a)}u({headers:t,onSort:V})})).catch((function(e){return alert(e.message+" posts")})))}),[]),Object(c.useEffect)((function(){z(_).catch((function(e){return alert(e.message)})),q().then((function(e){r(e)})).catch((function(e){return alert(e.message)}))}),[_]),Object(c.useEffect)((function(){A().then((function(e){I(e)})).catch((function(e){return alert(e.message+" users")}))}),[]);var G=Object(c.useMemo)((function(){var e,t,c,r,a,s=n;if(""!==f)switch(J){case"":break;case"userId":s=null===(e=s)||void 0===e?void 0:e.filter((function(e){return e.userId.toString()===f}));break;case"id":s=null===(t=s)||void 0===t?void 0:t.filter((function(e){return e.id.toString()===f}));break;case"title":s=null===(c=s)||void 0===c?void 0:c.filter((function(e){return e.title.includes(f)}));break;case"body":s=null===(r=s)||void 0===r?void 0:r.filter((function(e){return e.body.includes(f)}))}if(v.column){var o,i="asc"===v.order?1:-1;s=null===(o=s)||void 0===o?void 0:o.sort((function(e,t){return i*e[v.column].toString().localeCompare(t[v.column].toString(),void 0,{numeric:!0})}))}B&&(s=null===(a=s)||void 0===a?void 0:a.filter((function(e){return e.userId===B})));return s}),[f,n,v,B,J]);return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"controls",children:[F&&Object(x.jsx)("h1",{className:"controls__header",children:"Here's your control panel! Control those posts!"}),F&&Object(x.jsx)(C,{onUserFilterChange:function(e){U(parseInt(e.target.value))},usersData:F}),i&&Object(x.jsx)(w,{onSelectedSearchFieldChange:function(e){M(e.target.value)},onSearchStringChange:function(e){p(e.target.value)},headers:i.headers})]}),n&&Object(x.jsx)(y,{tableBodyData:{posts:G,onDelete:function(e){N(e)}},tableHeadData:i})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},N=function(){var e=Object(a.usePromiseTracker)().promiseInProgress;return Object(x.jsx)(x.Fragment,{children:e?Object(x.jsx)("div",{className:"loader",style:{width:"100%",height:"300",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(x.jsx)(o.a,{type:"Puff",color:"#2F4858",height:"100",width:"100"})}):""})};u.a.render(Object(x.jsxs)(r.a.StrictMode,{children:[Object(x.jsx)(k,{}),Object(x.jsx)(N,{})]}),document.getElementById("root")),_()}},[[62,1,2]]]);
//# sourceMappingURL=main.41be9fdc.chunk.js.map